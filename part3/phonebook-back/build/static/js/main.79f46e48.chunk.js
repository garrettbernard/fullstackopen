(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),a=t(3),o=t(2),u=t(6),s=t(4),i=t.n(s),d="/api/persons",l={getAll:function(){return i.a.get(d).then((function(e){return e.data}))},create:function(e){return i.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},f=t(0),j=function(e){var n=e.persons,t=e.setPersons,r=e.newName,c=e.setNewName,a=e.newPhone,o=e.setNewPhone,s=e.setNewMessage;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var i={name:r,number:a,id:n.length+1},d=n.filter((function(e){return e.name===r})).map((function(e){return e.id}));if(d.length>0)if(window.confirm(r+" is already added to phonebook. replace the old number with a new one?")){var f=n.find((function(e){return e.id===d[0]})),j=Object(u.a)(Object(u.a)({},f),{},{number:i.number});l.update(d[0],j).then((function(e){t(n.map((function(n){return n.id!==d[0]?n:e}))),s("Updated ".concat(i.name))})).catch((function(e){s({message:"Information of ".concat(i.name," has already been removed from server"),type:"error"}),setTimeout((function(){s(null)}),5e3)}))}else c(""),o("");else l.create(i).then((function(e){t(n.concat(i)),c(""),o(""),s({message:"Added ".concat(i.name),type:"added"}),setTimeout((function(){s(null)}),5e3)})).catch((function(e){s({message:"".concat(e.response.data.error),type:"error"})}))},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:r,onChange:function(e){return c(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:a,onChange:function(e){return o(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},h=function(e){var n=e.setNewSearch,t=e.newSearch;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},b=function(e){var n=e.persons,t=e.newSearch,r=e.toggleDelete,c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(f.jsxs)("div",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return window.confirm("Delete ".concat(e.name," ?"))?r(e.id):null},children:"Delete"})]},e.id)}));return Object(f.jsx)("div",{children:c})},m=function(e){var n=Object(o.useState)([]),t=Object(a.a)(n,2),r=t[0],c=t[1],u=Object(o.useState)(""),s=Object(a.a)(u,2),i=s[0],d=s[1],m=Object(o.useState)(""),O=Object(a.a)(m,2),p=O[0],v=O[1],w=Object(o.useState)(""),g=Object(a.a)(w,2),x=g[0],N=g[1],S=Object(o.useState)([]),y=Object(a.a)(S,2),k=y[0],P=y[1];Object(o.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);var C=function(e){var n=e.message;return null===n?null:(console.log(n),Object(f.jsx)("div",{className:n.type,children:n.message}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(C,{message:k}),Object(f.jsx)(h,{setNewSearch:d,newSearch:i}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(j,{persons:r,setPersons:c,newName:p,setNewName:v,newPhone:x,setNewPhone:N,setNewMessage:P}),Object(f.jsx)(b,{persons:r,newSearch:i,toggleDelete:function(e){var n=r.find((function(n){return n.id===e}));l.remove(e).then((function(n){c(r.filter((function(n){return n.id!==e})))})).catch((function(e){P({message:"Information of ".concat(n.name," has already been removed from server"),type:"error"}),setTimeout((function(){P(null)}),5e3)}))}})]})};t(39);c.a.render(Object(f.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.79f46e48.chunk.js.map